<html>
    <head>
        <title> QuickJS </title>

        <script type="text/javascript" src="quick_tokenizer.js"></script>
        <script type="text/javascript" src="quick_compiler.js"></script>
        <script type="text/javascript" src="quick_dom.js"></script>
        <script type="text/javascript" src="quick_helper.js"></script>
        <script type="text/javascript" src="quick.js"></script>

        <script type="text/javascript">

        function compile () {

            var textarea = window.document.getElementById("jml");

            Quick.useQueryFlags();
            var tokens = Quick.Tokenizer.parse(textarea.value);
            Quick.Compiler.render(tokens, function (error, result) {
                if (error) {
                    console.log(error);
                } else {
                    document.getElementById("output").innerHTML = result;
                    eval(result);
                }
            });
        }

        </script>
    </head>

    <body onload="">

<textarea id="jml" cols="80" rows="20">
Item {
    id: elem
    width: 100;
    height: 100;
    left: 0;
    top: 0;
    background-color: "#ffff00";

    Image {
        id: image1;
        top: 10;
        left: 10;
        width: 128;
        height: 128;
    }

    Image {
        top: 10;
        left: 200;
        width: 128;
        height: 128;
        src: "url('weather-clouds.png')";
    }

    Image {
        top: 10;
        left: 400;
        width: 128;
        height: 128;
        src: "weather-few-clouds-night.png";
    }

    Rectangle {
        id: child
        width: this.elem.width * 2.0;
        height: 200;
        left: 500;
        top: 100;
        background-color: this.hoverEnabled ? "#ff00ff" : "#770077";
        //scale: 1.5;
        onmousemove: ^{
            if (this.mousePressed) {
                this.left = this.mouseAbsX - this.mouseRelStartX;
                this.top = this.mouseAbsY - this.mouseRelStartY;
            }
        }^

        Button {
            id: child2
            width: 100;
            height: 20;
            left: 20;
            top: 20;
            text: "Toggle drag"
            hoverEnabled: true;
            border-radius: this.mousePressed ? 4 : 2;
            border-color: this.containsMouse ? "black" : "gray";
            background-color: this.mousePressed ? "gray" : "lightgray";
            onclick: ^{
                this.parent.hoverEnabled = !this.parent.hoverEnabled;
                console.log("toggle dragging");
            }^;
        }
    }
}
</textarea>

        <input type="button" value="compile" onclick="compile()"/>

<pre id="output">

</pre>

    </body>
</html>

